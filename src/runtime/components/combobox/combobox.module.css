.dropdown {
	--combobox-padding: .25rem;
	padding: var(--combobox-padding);

	&:has([data-scrollbar]) {
		.search {
			max-width: calc(100% + var(--combobox-padding));
		}
	}

	&[data-composed] {
		padding-inline-end: 0;
	}

	&[data-hidden] {
		display: none;
	}
}

/* Variables must be both on dropdown and options to support usage of Combobox.Options without Combobox.Dropdown */
.dropdown,
.options {
	--combobox-option-padding-xs: rem(4px) rem(8px);
	--combobox-option-padding-sm: rem(6px) rem(10px);
	--combobox-option-padding-md: rem(8px) rem(12px);
	--combobox-option-padding-lg: rem(10px) rem(16px);
	--combobox-option-padding-xl: rem(14px) rem(20px);
	--combobox-option-padding: var(--combobox-option-padding-sm);
}

.option {
	display: flex;
	align-items: center;
	gap: 8px;

	padding: var(--combobox-option-padding);
	font-size: var(--combobox-option-fz, var(--font-size-sm));
	border-radius: var(--radius-default);
	background-color: transparent;
	color: inherit;
	cursor: pointer;
	overflow-wrap: break-word;

	&:where([data-combobox-selected]) {
		background-color: var(--color-primary-filled);
		color: var(--color-white);
	}

	&:where([data-combobox-disabled]) {
		cursor: not-allowed;
		opacity: 0.35;
	}

	&:where([data-reverse]) {
		justify-content: space-between;
	}

	@mixin hover {
		&:where(:not([data-combobox-selected], [data-combobox-disabled])) {
			@mixin where-light {
				background-color: var(--color-gray-0);
			}

			@mixin where-dark {
				background-color: var(--color-dark-7);
			}
		}
	}
}

.optionCheck {
	opacity: 0.4;
	width: 0.8em;
	min-width: 0.8em;
	height: 0.8em;

	:where([data-combobox-selected]) & {
		opacity: 1;
	}
}


.search {
	margin-inline: calc(var(--combobox-padding) * -1);
	margin-top: calc(var(--combobox-padding) * -1);
	width: calc(100% + var(--combobox-padding) * 2);
	border-top-width: 0;
	border-inline-width: 0;
	border-end-start-radius: 0;
	border-end-end-radius: 0;
	margin-bottom: var(--combobox-padding);
	position: relative;

	&,
	&:focus {
		@mixin where-light {
			border-color: var(--color-gray-2);
		}

		@mixin where-dark {
			border-color: var(--color-dark-4);
		}
	}

	@mixin where-light {
		background-color: var(--color-white);
	}

	@mixin where-dark {
		background-color: var(--color-dark-7);
	}
}

.empty {
	font-size: var(--combobox-option-fz, var(--font-size-sm));
	text-align: center;
	padding: var(--combobox-option-padding);
	color: var(--color-dimmed);
}

.header,
.footer {
	font-size: var(--combobox-option-fz, var(--font-size-sm));
	border: 0 solid transparent;
	margin-inline: calc(var(--combobox-padding) * -1);
	padding: var(--combobox-option-padding);

	@mixin where-light {
		border-color: var(--color-gray-2);
	}

	@mixin where-dark {
		border-color: var(--color-dark-4);
	}
}

.footer {
	border-top-width: 1px;
	margin-top: var(--combobox-padding);
	margin-bottom: calc(var(--combobox-padding) * -1);
}

.header {
	border-bottom-width: 1px;
	margin-bottom: var(--combobox-padding);
	margin-top: calc(var(--combobox-padding) * -1);
}

.group {
	&:has(.groupLabel:only-child) {
		display: none;
	}
}

.groupLabel {
	color: var(--color-dimmed);
	font-size: calc(var(--combobox-option-fz, var(--font-size-sm)) * 0.85);
	padding: var(--combobox-option-padding);
	font-weight: 500;
	position: relative;
	display: flex;
	align-items: center;

	&::after {
		content: '';
		flex: 1;
		inset-inline: 0;
		height: 1px;
		margin-inline-start: var(--spacing-xs);

		@mixin where-light {
			background-color: var(--color-gray-2);
		}

		@mixin where-dark {
			background-color: var(--color-dark-4);
		}
	}

	&:only-child {
		display: none;
	}
}

/* ------- Combobox.Chevron ------- */
.chevron {
	--combobox-chevron-size-xs: rem(14px);
	--combobox-chevron-size-sm: rem(18px);
	--combobox-chevron-size-md: rem(20px);
	--combobox-chevron-size-lg: rem(24px);
	--combobox-chevron-size-xl: rem(28px);
	--combobox-chevron-size: var(--combobox-chevron-size-sm);

	@mixin where-light {
		--_combobox-chevron-color: var(--combobox-chevron-color, var(--color-gray-6));
	}

	@mixin where-dark {
		--_combobox-chevron-color: var(--combobox-chevron-color, var(--color-dark-3));
	}

	width: var(--combobox-chevron-size);
	height: var(--combobox-chevron-size);
	color: var(--_combobox-chevron-color);

	&:where([data-error]) {
		color: var(--combobox-chevron-color, var(--color-error));
	}
}
